---
description: Reglas para el uso del MCP Server de shadcn/ui en la generaci√≥n de interfaces
globs: ["**/*.tsx", "**/*.ts", "src/components/**/*", "src/app/**/*"]
alwaysApply: false
---

# Reglas para uso del MCP de shadcn/ui

Este proyecto utiliza el **MCP Server de shadcn** para la gesti√≥n y generaci√≥n de componentes de UI. **Siempre** utiliza las herramientas del MCP cuando trabajes con interfaces.

## Configuraci√≥n del Proyecto

- **Registry configurado**: `@shadcn`
- **Estilo**: default
- **RSC**: habilitado (React Server Components)
- **Aliases**:
  - Componentes: `@/components`
  - UI: `@/components/ui`
  - Utils: `@/lib/utils`
  - Hooks: `@/hooks`
- **Librer√≠a de iconos**: Lucide React

## Flujo Obligatorio para Interfaces

### 1. Antes de Crear Cualquier Componente UI

**SIEMPRE** busca primero si existe un componente en el registry:

```
mcp_shadcn_search_items_in_registries(registries: ["@shadcn"], query: "nombre-componente")
```

### 2. Ver Detalles del Componente

Antes de implementar, revisa los detalles y archivos del componente:

```
mcp_shadcn_view_items_in_registries(items: ["@shadcn/nombre-componente"])
```

### 3. Obtener Ejemplos de Uso

**OBLIGATORIO** revisar ejemplos antes de implementar:

```
mcp_shadcn_get_item_examples_from_registries(registries: ["@shadcn"], query: "nombre-demo")
```

Patrones comunes de b√∫squeda de ejemplos:
- `{component}-demo` (ej: `button-demo`, `card-demo`)
- `{component} example`
- `example-{feature}` (ej: `example-booking-form`)

### 4. Instalar Componentes

Obt√©n el comando de instalaci√≥n:

```
mcp_shadcn_get_add_command_for_items(items: ["@shadcn/button", "@shadcn/card"])
```

### 5. Verificaci√≥n Post-Implementaci√≥n

Despu√©s de crear o modificar componentes, ejecuta:

```
mcp_shadcn_get_audit_checklist()
```

## Estructura de Componentes

Los componentes de shadcn se instalan en:
- **Componentes UI base**: `src/components/ui/`
- **Componentes compuestos**: `src/components/`

## Reglas de Implementaci√≥n

### ‚úÖ SIEMPRE

1. **Buscar en el registry** antes de crear componentes desde cero
2. **Revisar ejemplos** del componente antes de implementar
3. **Usar los componentes instalados** de `@/components/ui`
4. **Mantener consistencia** con el estilo default configurado
5. **Usar CSS variables** para temas (ya configurado en tailwind)
6. **Importar desde aliases**: 
   ```tsx
   import { Button } from "@/components/ui/button"
   import { cn } from "@/lib/utils"
   ```

### ‚ùå NUNCA

1. Crear componentes UI b√°sicos desde cero si existen en shadcn
2. Modificar directamente los archivos en `src/components/ui/` (son generados)
3. Ignorar los ejemplos disponibles en el registry
4. Usar estilos inline cuando existen variants en el componente

## Comandos MCP Disponibles

| Herramienta | Uso |
|-------------|-----|
| `mcp_shadcn_get_project_registries` | Ver registries configurados |
| `mcp_shadcn_list_items_in_registries` | Listar todos los componentes disponibles |
| `mcp_shadcn_search_items_in_registries` | Buscar componentes por nombre/descripci√≥n |
| `mcp_shadcn_view_items_in_registries` | Ver detalles y c√≥digo de componentes |
| `mcp_shadcn_get_item_examples_from_registries` | Obtener ejemplos de implementaci√≥n |
| `mcp_shadcn_get_add_command_for_items` | Obtener comando CLI para instalar |
| `mcp_shadcn_get_audit_checklist` | Verificar implementaci√≥n |

## Ejemplo de Flujo Completo

Cuando el usuario pida crear un formulario con inputs y botones:

1. **Buscar componentes necesarios**:
   ```
   search_items_in_registries(["@shadcn"], "form")
   search_items_in_registries(["@shadcn"], "input")
   search_items_in_registries(["@shadcn"], "button")
   ```

2. **Revisar ejemplos**:
   ```
   get_item_examples_from_registries(["@shadcn"], "form-demo")
   ```

3. **Ver detalles si es necesario**:
   ```
   view_items_in_registries(["@shadcn/form", "@shadcn/input", "@shadcn/button"])
   ```

4. **Obtener comando de instalaci√≥n** (si no est√°n instalados):
   ```
   get_add_command_for_items(["@shadcn/form", "@shadcn/input", "@shadcn/button"])
   ```

5. **Implementar** usando los ejemplos como referencia

6. **Auditar**:
   ```
   get_audit_checklist()
   ```

## Componentes Ya Instalados

Revisa `src/components/ui/` para ver qu√© componentes ya est√°n disponibles en el proyecto. No es necesario reinstalarlos.

## Personalizaci√≥n

Si necesitas extender un componente de shadcn:
1. Crea un nuevo componente en `src/components/` (no en `ui/`)
2. Importa y compone sobre el componente base de `@/components/ui`
3. Mant√©n la API consistente con shadcn cuando sea posible

---

## üîÑ Reglas de Migraci√≥n a shadcn

Cuando se migran componentes de otras fuentes (Material UI, Chakra, Ant Design, Bootstrap, componentes custom, etc.) a shadcn, seguir este proceso:

### Flujo de Migraci√≥n Obligatorio

#### Paso 1: An√°lisis del Componente Original

Antes de migrar, documenta:
- **Props actuales**: Qu√© props recibe el componente
- **Estados**: Estados internos y externos que maneja
- **Eventos**: onClick, onChange, onSubmit, etc.
- **Estilos custom**: Clases CSS, styled-components, estilos inline
- **Dependencias**: Otros componentes que usa internamente

#### Paso 2: Buscar Equivalente en shadcn

```
mcp_shadcn_search_items_in_registries(registries: ["@shadcn"], query: "componente-equivalente")
```

**Mapeo com√∫n de componentes:**

| Fuente Original | Equivalente shadcn |
|-----------------|-------------------|
| MUI Button, Chakra Button | `@shadcn/button` |
| MUI TextField, Chakra Input | `@shadcn/input` + `@shadcn/label` |
| MUI Select, Chakra Select | `@shadcn/select` |
| MUI Dialog, Chakra Modal | `@shadcn/dialog` |
| MUI Drawer | `@shadcn/sheet` |
| MUI Snackbar, Chakra Toast | `@shadcn/toast` + `@shadcn/sonner` |
| MUI Tabs, Chakra Tabs | `@shadcn/tabs` |
| MUI Card, Chakra Card | `@shadcn/card` |
| MUI Accordion | `@shadcn/accordion` |
| MUI Menu, Chakra Menu | `@shadcn/dropdown-menu` |
| MUI Tooltip | `@shadcn/tooltip` |
| MUI Checkbox | `@shadcn/checkbox` |
| MUI Switch | `@shadcn/switch` |
| MUI Slider | `@shadcn/slider` |
| MUI Progress | `@shadcn/progress` |
| MUI Avatar | `@shadcn/avatar` |
| MUI Badge | `@shadcn/badge` |
| MUI Alert | `@shadcn/alert` |
| MUI Table | `@shadcn/table` |
| MUI Skeleton | `@shadcn/skeleton` |
| Form libraries | `@shadcn/form` (usa react-hook-form + zod) |

#### Paso 3: Revisar API y Ejemplos del Componente shadcn

```
mcp_shadcn_view_items_in_registries(items: ["@shadcn/componente"])
mcp_shadcn_get_item_examples_from_registries(registries: ["@shadcn"], query: "componente-demo")
```

#### Paso 4: Mapear Props y Variantes

Crear una tabla de equivalencias:

```markdown
| Prop Original | Equivalente shadcn | Notas |
|---------------|-------------------|-------|
| variant="contained" | variant="default" | |
| variant="outlined" | variant="outline" | |
| color="primary" | (usar CSS variables) | |
| size="small" | size="sm" | |
| disabled | disabled | Sin cambios |
| onClick | onClick | Sin cambios |
```

#### Paso 5: Migraci√≥n del C√≥digo

**Patr√≥n de migraci√≥n:**

```tsx
// ‚ùå ANTES (Material UI ejemplo)
import { Button } from '@mui/material';

<Button 
  variant="contained" 
  color="primary" 
  size="small"
  startIcon={<SaveIcon />}
>
  Guardar
</Button>

// ‚úÖ DESPU√âS (shadcn)
import { Button } from '@/components/ui/button';
import { Save } from 'lucide-react';

<Button variant="default" size="sm">
  <Save className="mr-2 h-4 w-4" />
  Guardar
</Button>
```

#### Paso 6: Migrar Estilos Custom

- **Estilos inline** ‚Üí Usar `className` con Tailwind
- **CSS Modules** ‚Üí Convertir a Tailwind utilities
- **Styled Components** ‚Üí Convertir a Tailwind + `cn()` utility
- **Theme tokens** ‚Üí Usar CSS variables de shadcn

```tsx
// ‚ùå ANTES
<Box sx={{ padding: 2, backgroundColor: 'primary.main' }}>

// ‚úÖ DESPU√âS  
<div className="p-4 bg-primary">
```

#### Paso 7: Verificar y Testear

```
mcp_shadcn_get_audit_checklist()
```

Verificar:
- [ ] El componente renderiza correctamente
- [ ] Todos los eventos funcionan (onClick, onChange, etc.)
- [ ] Los estados se manejan correctamente
- [ ] La accesibilidad se mantiene (aria-labels, roles, etc.)
- [ ] El componente es responsive
- [ ] Los estilos son consistentes con el resto de la app

### Consideraciones Especiales de Migraci√≥n

#### Formularios
Si migras formularios, shadcn usa `react-hook-form` + `zod`:

```tsx
// Buscar ejemplos de forms
mcp_shadcn_get_item_examples_from_registries(registries: ["@shadcn"], query: "form")
```

#### Iconos
- Reemplazar iconos de otras librer√≠as por **Lucide React**
- Buscar equivalentes en: https://lucide.dev/icons

```tsx
// ‚ùå ANTES
import { Add, Delete, Edit } from '@mui/icons-material';

// ‚úÖ DESPU√âS
import { Plus, Trash2, Pencil } from 'lucide-react';
```

#### Temas y Colores
- Los colores de shadcn usan CSS variables
- Definidos en `globals.css`
- Usar clases como `bg-primary`, `text-muted-foreground`, etc.

#### Componentes Compuestos
Si el componente original es compuesto (ej: Card con CardHeader, CardContent):

```tsx
// shadcn tambi√©n usa composici√≥n
import { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/card';
```

### Checklist de Migraci√≥n por Archivo

Antes de marcar un archivo como migrado:

- [ ] Eliminar imports de la librer√≠a anterior
- [ ] Agregar imports de `@/components/ui`
- [ ] Actualizar props a la API de shadcn
- [ ] Convertir estilos a Tailwind
- [ ] Reemplazar iconos por Lucide
- [ ] Verificar accesibilidad
- [ ] Probar interactividad
- [ ] Ejecutar audit checklist del MCP

### Migraci√≥n Gradual

Para proyectos grandes, migrar por m√≥dulos:

1. **Identificar componentes m√°s usados** ‚Üí Migrar primero
2. **Crear wrappers temporales** si es necesario para compatibilidad
3. **Migrar p√°gina por p√°gina** para evitar breaking changes masivos
4. **Eliminar dependencias antiguas** solo cuando toda la migraci√≥n est√© completa
